<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FlowTime - Build a Routine</title>
  <style>
    body { 
      font-family: 'Poppins', sans-serif; 
      background: #f0f4f8; 
      margin:0; padding:0; 
    }
    header { 
      background: #fff; padding: 20px; text-align: center; 
      box-shadow:0 2px 10px rgba(0,0,0,0.1);
    }
    h1 { margin:0; color:#6c4ab6; }
    .container { padding: 20px; max-width:600px; margin:0 auto; }

    input, button {
      padding:10px; margin:5px 0; border-radius:10px; border:1px solid #ccc; width:100%;
    }

    .step-box {
      display:flex; gap:10px; margin-bottom:8px;
    }
    .step-box input { width:50%; }

    .routine-list { margin-top:20px; }
    .routine-item { 
      background:#fff; padding:10px; margin-bottom:10px; 
      border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); 
    }
  </style>
</head>
<body>

<header>
  <h1>ðŸ§© Build a Routine</h1>
</header>

<div class="container">

  <input type="text" id="routineName" placeholder="Routine Name">

  <h3>Add Steps</h3>
  <div id="stepsContainer"></div>
  <button onclick="addStep()">âž• Add Step</button>

  <button onclick="saveRoutine()">ðŸ’¾ Save Routine</button>

  <h3>Saved Routines</h3>
  <div class="routine-list" id="routineList"></div>

</div>

<script>
  // Add step fields
  function addStep() {
    const container = document.getElementById('stepsContainer');

    const div = document.createElement('div');
    div.className = 'step-box';

    div.innerHTML = `
      <input type="text" class="step-name" placeholder="Step Name">
      <input type="number" class="step-time" placeholder="Minutes">
    `;

    container.appendChild(div);
  }

  // Save routine to localStorage
  function saveRoutine() {
    const name = document.getElementById('routineName').value;
    const stepNames = document.querySelectorAll('.step-name');
    const stepTimes = document.querySelectorAll('.step-time');

    if (!name) {
      alert("Please enter a routine name");
      return;
    }

    let steps = [];
    let totalTime = 0;

    stepNames.forEach((input, i) => {
      const stepName = input.value;
      const stepTime = Number(stepTimes[i].value);

      if (stepName && stepTime > 0) {
        steps.push({ name: stepName, time: stepTime });
        totalTime += stepTime;
      }
    });

    const routine = {
      id: Date.now(),
      name,
      steps,
      totalTime
    };

    // Read existing routines
    let routines = JSON.parse(localStorage.getItem("routines") || "[]");

    // Add new routine
    routines.push(routine);

    // Save back
    localStorage.setItem("routines", JSON.stringify(routines));

    alert("Routine Saved!");
    displayRoutines();
  }

  // Display routines on the page
  function displayRoutines() {
    let routines = JSON.parse(localStorage.getItem("routines") || "[]");
    const container = document.getElementById('routineList');

    container.innerHTML = "";

    routines.forEach(r => {
      const div = document.createElement('div');
      div.className = "routine-item";

      div.innerHTML = `
        <strong>${r.name}</strong> (${r.totalTime} min)
        <br>
        <small>${r.steps.length} steps</small>
      `;

      container.appendChild(div);
    });
  }

  // Load routines on page load
  displayRoutines();
</script>

</body>
</html>
